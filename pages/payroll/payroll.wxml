<!--payroll-calculator.wxml-->
<view class="container payroll-calculator">
  <view class="navbar">
    <view class="navbar-item selected">
      税前计算税后
    </view>
    <view class="navbar-item">
      税后反推税前
    </view>
  </view>
  <view class="section">
    <view class="section-title">城市：</view>
    <picker bindchange="bindPickerChange" value="{{index}}" range="{{cities}}">
      <view class="picker">
        当前选择：{{cities[index]}}
      </view>
    </picker>
  </view>
  <view class="section">
    <view class="section-title">月薪：</view>
    <input type="digit" placeholder="0.00" bindinput="bindKeyInput" auto-focus="true" value="{{ income }}"/>
  </view>
  <view class="btn-area">
    <view class="button-wrapper">
      <button type="primary" hover-class="button-hover" bindtap="generateResult">计算</button>
    </view>
    <view class="button-wrapper">
      <button type="default" hover-class="button-hover" bindtap="clear">重置</button>
    </view>
  </view>
  <view class="section">
    <canvas id="myChart" width="400" height="400"></canvas>
  </view>
  <view class="section text-item">
    <text>税后工资剩余</text> <text>￥{{ results.incomeTotal || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>扣除四金后月薪</text> <text>￥{{ results.incomeBefore || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>个人所得税</text> <text>￥{{ results.tax || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>养老保险金（{{ cityRate[cities[index]].agefund || 8 }}%）</text> <text>￥{{ results.ageFund || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>医疗保险金（{{ cityRate[cities[index]].medfund || 2 }}%）</text> <text>￥{{ results.medFund || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>失业保险金（{{ cityRate[cities[index]].workfund || 0.2 }}%）</text> <text>￥{{ results.workFund || 0 }}</text>
  </view>
  <view class="section text-item">
    <text>住房公积金（{{ cityRate[cities[index]].housefund || 2 }}%）</text> <text>￥{{ results.houseFund || 0 }}</text>
  </view>
  <view>
  <table>
    <tbody>
      <tr>
        <td rowspan="2">
          级数
        </td>
        <td colspan="2">
          全月应纳税所得额
        </td>
        <td rowspan="2">
          税率(%)
        </td>
        <td rowspan="2">
          速算扣除数
        </td>
      </tr>
      <tr>
        <td>
          含税级距
        </td>
        <td>
          不含税级距
        </td>
      </tr>
      <tr>
        <td>
          1
        </td>
        <td>
          不超过1500元的
        </td>
        <td>
          不超过1455元的
        </td>
        <td>
          3
        </td>
        <td>
          0
        </td>
      </tr>
      <tr>
        <td>
          2
        </td>
        <td>
          超过1500元至4500元的部分
        </td>
        <td>
          超过1455元至4155元的部分
        </td>
        <td>
          10
        </td>
        <td>
          105
        </td>
      </tr>
      <tr>
        <td>
          3
        </td>
        <td>
          超过4500元至9000元的部分
        </td>
        <td>
          超过4155元至7755元的部分
        </td>
        <td>
          20
        </td>
        <td>
          555
        </td>
      </tr>
      <tr>
        <td>
          4
        </td>
        <td>
          超过9000元至35000元的部分
        </td>
        <td>
          超过7755元至27255元的部分
        </td>
        <td>
          25
        </td>
        <td>
          1005
        </td>
      </tr>
      <tr>
        <td>
          5
        </td>
        <td>
          超过35000元至55000元的部分
        </td>
        <td>
          超过27255元至41255元的部分
        </td>
        <td>
          30
        </td>
        <td>
          2755
        </td>
      </tr>
      <tr>
        <td>
          6
        </td>
        <td>
          超过55000元至80000元的部分
        </td>
        <td>
          超过41255元至57505元的部分
        </td>
        <td>
          35
        </td>
        <td>
          5505
        </td>
      </tr>
      <tr>
        <td>
          7
        </td>
        <td>
          超过80000元的部分
        </td>
        <td>
          超过57505元的部分
        </td>
        <td>
          45
        </td>
        <td>
          13505
        </td>
      </tr>
    </tbody>
  </table>
  </view>
</view>
